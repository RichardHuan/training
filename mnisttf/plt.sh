
grep "^Accuracy" cuda_fp32_1.log | awk '{print substr($4,1,length($4)-1) " "  $5}' > fp32.p
grep "^Accuracy" bf16_l2.log     | awk '{print substr($4,1,length($4)-1) " "  $5}' > bf16.p


#gnuplot -p -e 'set xlabel "Epoch";set ylabel "Accuracy";set key right bottom;set yrange [0.8:0.97] ; plot "a1_fp32_v100" u 1:2 w linesp title "fp32", "a15_bf16_fpbp_v100" u 1:2 w linesp title "bf16 8 bit mantissa", "a16_bf12_fpbp_v100" u 1:2 w linesp title "4 bit mantissa", "a17_bf10_fpbp_v100" u 1:2 w linesp title "2 bit mantissa", "a18_bf9_fpbp_v100" u 1:2 w linesp title "1 bit mantissa", "a19_bf8_fpbp_v100" u 1:2 w linesp title "leading 1 without mantissa", "a20_bf16_fpbit_bpmerge_v100" u 1:2 w linesp title "bf16 8 bit mantissa with fp bit shift", "a21_bf12_fpbit_bpmerge_v100" u 1:2 w linesp title "4 bit mantissa with fp bit shift", "a22_bf10_fpbit_bpmerge_v100" u 1:2 w linesp title "2 bit mantissa with fp bit shift", "a23_bf9_fpbit_bpmerge_v100"  u 1:2 w linesp title "1 bit mantissa with fp bit shift", "a24_bf8_fpbit_bpmerge_v100" u 1:2 w linesp title "leading 1 bit without mantissa with fp bit shift"'
#gnuplot -p -e 'set xlabel "Epoch";set ylabel "Accuracy";set key right bottom;set yrange [0.8:0.97] ; plot "a1_fp32_v100" u 1:2 w linesp title "fp32",  "a20_bf16_fpbit_bpmerge_v100" u 1:2 w linesp title "bf16 8 bit mantissa with fp bit shift", "a21_bf12_fpbit_bpmerge_v100" u 1:2 w linesp title "4 bit mantissa with fp bit shift", "a22_bf10_fpbit_bpmerge_v100" u 1:2 w linesp title "2 bit mantissa with fp bit shift", "a23_bf9_fpbit_bpmerge_v100"  u 1:2 w linesp title "1 bit mantissa with fp bit shift", "a24_bf8_fpbit_bpmerge_v100" u 1:2 w linesp title "leading 1 bit without mantissa with fp bit shift"'
gnuplot -p -e 'plot "bf16.p" u 1:2 w linesp, "fp32.p" u 1:2 w linesp'
